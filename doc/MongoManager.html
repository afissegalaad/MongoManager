
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><title>Python: module MongoManager</title>
<meta charset="utf-8">
</head><body bgcolor="#f0f0f8">

<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="heading">
<tr bgcolor="#7799ee">
<td valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial">&nbsp;<br><big><big><strong>MongoManager</strong></big></big> (version 1.0.0)</font></td
><td align=right valign=bottom
><font color="#ffffff" face="helvetica, arial"><a href=".">index</a><br><a href="file:/Users/couillec/Documents/Python/Mongo/MongoManager/MongoManager.py">/Users/couillec/Documents/Python/Mongo/MongoManager/MongoManager.py</a></font></td></tr></table>
    <p><tt>File&nbsp;name:&nbsp;MongoManager.py<br>
Author:&nbsp;Galaad<br>
Date&nbsp;created:&nbsp;10/02/2016<br>
Date&nbsp;last&nbsp;modified:&nbsp;10/03/2016</tt></p>
<p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#aa55cc">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Modules</strong></big></font></td></tr>
    
<tr><td bgcolor="#aa55cc"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><table width="100%" summary="list"><tr><td width="25%" valign=top><a href="json.html">json</a><br>
</td><td width="25%" valign=top><a href="socket.html">socket</a><br>
</td><td width="25%" valign=top><a href="sys.html">sys</a><br>
</td><td width="25%" valign=top></td></tr></table></td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#ee77aa">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Classes</strong></big></font></td></tr>
    
<tr><td bgcolor="#ee77aa"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><dl>
<dt><font face="helvetica, arial"><a href="MongoManager.html#MongoCluster">MongoCluster</a>
</font></dt><dt><font face="helvetica, arial"><a href="MongoManager.html#MongoReplicaSet">MongoReplicaSet</a>
</font></dt><dt><font face="helvetica, arial"><a href="MongoManager.html#Mongod">Mongod</a>
</font></dt><dt><font face="helvetica, arial"><a href="MongoManager.html#Mongos">Mongos</a>
</font></dt></dl>
 <p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#ffc8d8">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#000000" face="helvetica, arial"><a name="MongoCluster">class <strong>MongoCluster</strong></a></font></td></tr>
    
<tr bgcolor="#ffc8d8"><td rowspan=2><tt>&nbsp;&nbsp;&nbsp;</tt></td>
<td colspan=2><tt>The&nbsp;<a href="#MongoCluster">MongoCluster</a>&nbsp;class&nbsp;reprensent&nbsp;a&nbsp;MongoDB&nbsp;cluster.<br>
&nbsp;<br>
It&nbsp;permits&nbsp;the&nbsp;manage&nbsp;a&nbsp;whole&nbsp;cluster&nbsp;with&nbsp;a&nbsp;few&nbsp;methods&nbsp;like<br>
init,&nbsp;start,&nbsp;stop&nbsp;and&nbsp;clean.<br>&nbsp;</tt></td></tr>
<tr><td>&nbsp;</td>
<td width="100%">Methods defined here:<br>
<dl><dt><a name="MongoCluster-__init__"><strong>__init__</strong></a>(self, replica_factor<font color="#909090">=3</font>, scale_factor<font color="#909090">=2</font>, routers_factor<font color="#909090">=2</font>)</dt><dd><tt>Constructor&nbsp;of&nbsp;the&nbsp;<a href="#MongoCluster">MongoCluster</a>&nbsp;class.<br>
&nbsp;<br>
:param&nbsp;replica_factor:&nbsp;The&nbsp;number&nbsp;of&nbsp;nodes&nbsp;that&nbsp;each&nbsp;replica<br>
set&nbsp;contains.<br>
:param&nbsp;scale_factor:&nbsp;The&nbsp;number&nbsp;of&nbsp;replica&nbsp;set&nbsp;(shards).<br>
:param&nbsp;routers_factor:&nbsp;The&nbsp;number&nbsp;of&nbsp;mongos.</tt></dd></dl>

<dl><dt><a name="MongoCluster-clean"><strong>clean</strong></a>(self)</dt><dd><tt>Clean&nbsp;the&nbsp;cluster.</tt></dd></dl>

<dl><dt><a name="MongoCluster-init"><strong>init</strong></a>(self)</dt><dd><tt>Initialize&nbsp;the&nbsp;environment&nbsp;of&nbsp;the&nbsp;cluster.</tt></dd></dl>

<dl><dt><a name="MongoCluster-init_cluster"><strong>init_cluster</strong></a>(self)</dt><dd><tt>Initialize&nbsp;the&nbsp;cluster.</tt></dd></dl>

<dl><dt><a name="MongoCluster-init_replicas"><strong>init_replicas</strong></a>(self)</dt><dd><tt>Initialize&nbsp;the&nbsp;replica&nbsp;sets.</tt></dd></dl>

<dl><dt><a name="MongoCluster-start_replicas"><strong>start_replicas</strong></a>(self)</dt><dd><tt>Start&nbsp;all&nbsp;the&nbsp;replica&nbsp;sets.</tt></dd></dl>

<dl><dt><a name="MongoCluster-stop"><strong>stop</strong></a>(self)</dt><dd><tt>Stop&nbsp;the&nbsp;cluster.</tt></dd></dl>

</td></tr></table> <p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#ffc8d8">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#000000" face="helvetica, arial"><a name="MongoReplicaSet">class <strong>MongoReplicaSet</strong></a></font></td></tr>
    
<tr bgcolor="#ffc8d8"><td rowspan=2><tt>&nbsp;&nbsp;&nbsp;</tt></td>
<td colspan=2><tt>Class&nbsp;representing&nbsp;a&nbsp;replica&nbsp;set.<br>&nbsp;</tt></td></tr>
<tr><td>&nbsp;</td>
<td width="100%">Methods defined here:<br>
<dl><dt><a name="MongoReplicaSet-__init__"><strong>__init__</strong></a>(self, type<font color="#909090">='data'</font>, replname<font color="#909090">='data_set'</font>, replica_factor<font color="#909090">=3</font>)</dt><dd><tt>Constructor&nbsp;of&nbsp;the&nbsp;<a href="#MongoReplicaSet">MongoReplicaSet</a>&nbsp;class.<br>
&nbsp;<br>
:param&nbsp;type:&nbsp;The&nbsp;type&nbsp;of&nbsp;replica&nbsp;set.&nbsp;Either&nbsp;"data"&nbsp;or<br>
"config".&nbsp;&nbsp;:param&nbsp;replname:&nbsp;The&nbsp;name&nbsp;of&nbsp;the&nbsp;replica&nbsp;set.<br>
:param&nbsp;replica_factor:&nbsp;The&nbsp;number&nbsp;of&nbsp;node&nbsp;that&nbsp;the&nbsp;replica&nbsp;set<br>
contains.&nbsp;Must&nbsp;be&nbsp;an&nbsp;odd&nbsp;number.</tt></dd></dl>

<dl><dt><a name="MongoReplicaSet-clean"><strong>clean</strong></a>(self)</dt><dd><tt>Clean&nbsp;the&nbsp;environment&nbsp;of&nbsp;the&nbsp;replica&nbsp;set.</tt></dd></dl>

<dl><dt><a name="MongoReplicaSet-init"><strong>init</strong></a>(self)</dt><dd><tt>Initialize&nbsp;the&nbsp;environment&nbsp;of&nbsp;the&nbsp;replica&nbsp;set.</tt></dd></dl>

<dl><dt><a name="MongoReplicaSet-init_replica"><strong>init_replica</strong></a>(self)</dt><dd><tt>Initialize&nbsp;the&nbsp;replica&nbsp;set.&nbsp;It&nbsp;connects&nbsp;the&nbsp;nodes&nbsp;together.&nbsp;After<br>
the&nbsp;execution&nbsp;of&nbsp;this&nbsp;method,&nbsp;the&nbsp;replica&nbsp;set&nbsp;is&nbsp;ready&nbsp;to&nbsp;be<br>
used.</tt></dd></dl>

<dl><dt><a name="MongoReplicaSet-start"><strong>start</strong></a>(self)</dt><dd><tt>Start&nbsp;the&nbsp;replica&nbsp;set.</tt></dd></dl>

<dl><dt><a name="MongoReplicaSet-stop"><strong>stop</strong></a>(self)</dt><dd><tt>Stop&nbsp;the&nbsp;replica&nbsp;set.</tt></dd></dl>

<hr>
Data and other attributes defined here:<br>
<dl><dt><strong>count</strong> = 0</dl>

</td></tr></table> <p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#ffc8d8">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#000000" face="helvetica, arial"><a name="Mongod">class <strong>Mongod</strong></a></font></td></tr>
    
<tr bgcolor="#ffc8d8"><td rowspan=2><tt>&nbsp;&nbsp;&nbsp;</tt></td>
<td colspan=2><tt>Represents&nbsp;a&nbsp;mongod&nbsp;process.<br>
&nbsp;<br>
This&nbsp;class&nbsp;manages&nbsp;one&nbsp;mongod&nbsp;process.&nbsp;It&nbsp;can&nbsp;start,&nbsp;init,&nbsp;stop,<br>
and&nbsp;clean&nbsp;it.<br>&nbsp;</tt></td></tr>
<tr><td>&nbsp;</td>
<td width="100%">Methods defined here:<br>
<dl><dt><a name="Mongod-__init__"><strong>__init__</strong></a>(self, ihostname<font color="#909090">='yoann'</font>, iport<font color="#909090">=27000</font>, itype<font color="#909090">='data'</font>, ireplname<font color="#909090">='dataReplSet'</font>, idbpath<font color="#909090">='data/'</font>, ibaselogpath<font color="#909090">='log/'</font>, ipidpath<font color="#909090">='pid/'</font>)</dt><dd><tt>Initialize&nbsp;the&nbsp;<a href="#Mongod">Mongod</a>&nbsp;class.&nbsp;<br>
&nbsp;<br>
It&nbsp;sets&nbsp;all&nbsp;the&nbsp;configuration&nbsp;but&nbsp;does&nbsp;not&nbsp;change&nbsp;anything&nbsp;on<br>
the&nbsp;machine.&nbsp;Does&nbsp;not&nbsp;create&nbsp;any&nbsp;directories.<br>
&nbsp;<br>
:param&nbsp;ihostname:&nbsp;The&nbsp;hostname&nbsp;of&nbsp;the&nbsp;machine&nbsp;of&nbsp;which&nbsp;the<br>
process&nbsp;is&nbsp;launched&nbsp;(currently&nbsp;localhost,&nbsp;but&nbsp;the&nbsp;hostname&nbsp;of<br>
localhost&nbsp;is&nbsp;not&nbsp;necessarly&nbsp;localhost).<br>
:param&nbsp;iport:&nbsp;The&nbsp;port&nbsp;on&nbsp;which&nbsp;the&nbsp;process&nbsp;will&nbsp;be&nbsp;started.<br>
:param&nbsp;itype:&nbsp;The&nbsp;type&nbsp;of&nbsp;node&nbsp;to&nbsp;start.&nbsp;Either&nbsp;"data"&nbsp;or&nbsp;"config".<br>
:param&nbsp;ireplname:&nbsp;The&nbsp;name&nbsp;of&nbsp;the&nbsp;replica&nbsp;set&nbsp;it&nbsp;belongs&nbsp;to.<br>
:param&nbsp;idbpath:&nbsp;The&nbsp;path&nbsp;to&nbsp;the&nbsp;directory&nbsp;that&nbsp;will&nbsp;contain<br>
the&nbsp;data.&nbsp;Can&nbsp;be&nbsp;relative&nbsp;or&nbsp;absolute.<br>
:param&nbsp;ibaselogpath:&nbsp;The&nbsp;path&nbsp;to&nbsp;the&nbsp;log&nbsp;file.<br>
:param&nbsp;ipidpath:&nbsp;The&nbsp;path&nbsp;to&nbsp;a&nbsp;file&nbsp;that&nbsp;contains&nbsp;the&nbsp;PID&nbsp;of<br>
the&nbsp;mongod&nbsp;process&nbsp;launched.</tt></dd></dl>

<dl><dt><a name="Mongod-clean"><strong>clean</strong></a>(self)</dt><dd><tt>Clean&nbsp;all&nbsp;the&nbsp;directories&nbsp;attached&nbsp;to&nbsp;the&nbsp;mongod&nbsp;process.</tt></dd></dl>

<dl><dt><a name="Mongod-init"><strong>init</strong></a>(self)</dt><dd><tt>Initialize&nbsp;the&nbsp;environment&nbsp;to&nbsp;prepare&nbsp;the&nbsp;mongod&nbsp;process&nbsp;to&nbsp;be<br>
launched.&nbsp;<br>
&nbsp;<br>
Check&nbsp;if&nbsp;the&nbsp;port&nbsp;is&nbsp;open&nbsp;and&nbsp;creates&nbsp;all&nbsp;the&nbsp;directories.</tt></dd></dl>

<dl><dt><a name="Mongod-start"><strong>start</strong></a>(self)</dt><dd><tt>Start&nbsp;the&nbsp;mongod&nbsp;process.<br>
&nbsp;<br>
The&nbsp;PID&nbsp;is&nbsp;stored&nbsp;into&nbsp;a&nbsp;file..</tt></dd></dl>

<dl><dt><a name="Mongod-stop"><strong>stop</strong></a>(self)</dt><dd><tt>Kill&nbsp;the&nbsp;mongod&nbsp;process.&nbsp;Does&nbsp;not&nbsp;remove&nbsp;the&nbsp;data&nbsp;files.</tt></dd></dl>

<hr>
Data and other attributes defined here:<br>
<dl><dt><strong>count</strong> = 0</dl>

</td></tr></table> <p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#ffc8d8">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#000000" face="helvetica, arial"><a name="Mongos">class <strong>Mongos</strong></a></font></td></tr>
    
<tr bgcolor="#ffc8d8"><td rowspan=2><tt>&nbsp;&nbsp;&nbsp;</tt></td>
<td colspan=2><tt>Class&nbsp;representing&nbsp;a&nbsp;mongos&nbsp;process&nbsp;and&nbsp;manage&nbsp;it.<br>&nbsp;</tt></td></tr>
<tr><td>&nbsp;</td>
<td width="100%">Methods defined here:<br>
<dl><dt><a name="Mongos-__init__"><strong>__init__</strong></a>(self, port<font color="#909090">=28000</font>, configstring<font color="#909090">=''</font>, ibaselogpath<font color="#909090">='log/router/'</font>, ipidpath<font color="#909090">='pid/router/'</font>)</dt><dd><tt>Constructor&nbsp;of&nbsp;th&nbsp;<a href="#Mongos">Mongos</a>&nbsp;class.<br>
&nbsp;<br>
:param&nbsp;port:&nbsp;The&nbsp;port&nbsp;on&nbsp;which&nbsp;the&nbsp;mongos&nbsp;will&nbsp;be&nbsp;launched.<br>
:param&nbsp;configstring:&nbsp;The&nbsp;string&nbsp;containing&nbsp;the&nbsp;name&nbsp;of&nbsp;the<br>
replica&nbsp;config&nbsp;set&nbsp;with&nbsp;all&nbsp;the&nbsp;hostnames&nbsp;and&nbsp;port&nbsp;of&nbsp;the<br>
config&nbsp;nodes.<br>
:param&nbsp;ibaselogpath:&nbsp;The&nbsp;path&nbsp;to&nbsp;the&nbsp;log&nbsp;file.<br>
:param&nbsp;ipidpath:&nbsp;The&nbsp;path&nbsp;to&nbsp;the&nbsp;pid&nbsp;file.</tt></dd></dl>

<dl><dt><a name="Mongos-clean"><strong>clean</strong></a>(self)</dt><dd><tt>Clean&nbsp;the&nbsp;environment&nbsp;of&nbsp;the&nbsp;mongos&nbsp;process.</tt></dd></dl>

<dl><dt><a name="Mongos-init"><strong>init</strong></a>(self)</dt><dd><tt>Initialize&nbsp;the&nbsp;environment&nbsp;of&nbsp;the&nbsp;mongos&nbsp;process&nbsp;that&nbsp;will&nbsp;be&nbsp;runned<br>
with&nbsp;<a href="#Mongos-start">start</a>()&nbsp;method.</tt></dd></dl>

<dl><dt><a name="Mongos-start"><strong>start</strong></a>(self)</dt><dd><tt>Start&nbsp;the&nbsp;mongos&nbsp;process.</tt></dd></dl>

<dl><dt><a name="Mongos-stop"><strong>stop</strong></a>(self)</dt><dd><tt>Stop&nbsp;the&nbsp;mongos&nbsp;process.</tt></dd></dl>

<hr>
Data and other attributes defined here:<br>
<dl><dt><strong>count</strong> = 0</dl>

</td></tr></table></td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#eeaa77">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Functions</strong></big></font></td></tr>
    
<tr><td bgcolor="#eeaa77"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><dl><dt><a name="-call"><strong>call</strong></a>(cmd)</dt><dd><tt>Wrapper&nbsp;for&nbsp;Popen.&nbsp;Call&nbsp;a&nbsp;given&nbsp;command.<br>
&nbsp;<br>
It&nbsp;returns&nbsp;a&nbsp;tuple&nbsp;that&nbsp;contains&nbsp;the&nbsp;output&nbsp;string,&nbsp;the&nbsp;error<br>
strings&nbsp;and&nbsp;the&nbsp;return&nbsp;code.<br>
&nbsp;<br>
:param&nbsp;cmd:&nbsp;The&nbsp;command&nbsp;to&nbsp;launch.</tt></dd></dl>
 <dl><dt><a name="-error"><strong>error</strong></a>(msg, code<font color="#909090">=1</font>)</dt><dd><tt>Print&nbsp;an&nbsp;error&nbsp;message.<br>
&nbsp;<br>
To&nbsp;use&nbsp;when&nbsp;something&nbsp;bad&nbsp;happened&nbsp;that&nbsp;affects&nbsp;the&nbsp;rest&nbsp;of&nbsp;the<br>
execution.&nbsp;Then&nbsp;the&nbsp;execution&nbsp;is&nbsp;stopped&nbsp;and&nbsp;a&nbsp;user-defined&nbsp;error<br>
code&nbsp;is&nbsp;returned.<br>
&nbsp;<br>
:param&nbsp;msg:&nbsp;The&nbsp;error&nbsp;message.<br>
:param&nbsp;code:&nbsp;The&nbsp;error&nbsp;code.:</tt></dd></dl>
 <dl><dt><a name="-is_open_port"><strong>is_open_port</strong></a>(port)</dt><dd><tt>Check&nbsp;if&nbsp;a&nbsp;port&nbsp;is&nbsp;open&nbsp;(listening)&nbsp;or&nbsp;not&nbsp;on&nbsp;localhost.<br>
&nbsp;<br>
It&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;port&nbsp;is&nbsp;actually&nbsp;listening,&nbsp;false<br>
otherwise.<br>
&nbsp;<br>
:param&nbsp;port:&nbsp;The&nbsp;port&nbsp;to&nbsp;check.</tt></dd></dl>
 <dl><dt><a name="-sleep"><strong>sleep</strong></a>(...)</dt><dd><tt><a href="#-sleep">sleep</a>(seconds)<br>
&nbsp;<br>
Delay&nbsp;execution&nbsp;for&nbsp;a&nbsp;given&nbsp;number&nbsp;of&nbsp;seconds.&nbsp;&nbsp;The&nbsp;argument&nbsp;may&nbsp;be<br>
a&nbsp;floating&nbsp;point&nbsp;number&nbsp;for&nbsp;subsecond&nbsp;precision.</tt></dd></dl>
 <dl><dt><a name="-success"><strong>success</strong></a>(msg)</dt><dd><tt>Print&nbsp;a&nbsp;success&nbsp;message.<br>
&nbsp;<br>
Use&nbsp;this&nbsp;fonction&nbsp;when&nbsp;some&nbsp;execution&nbsp;went&nbsp;well&nbsp;and&nbsp;you&nbsp;want&nbsp;to<br>
say&nbsp;the&nbsp;user&nbsp;that&nbsp;everything&nbsp;is&nbsp;fine.<br>
&nbsp;<br>
:param&nbsp;msg:&nbsp;The&nbsp;success&nbsp;message.</tt></dd></dl>
 <dl><dt><a name="-warning"><strong>warning</strong></a>(msg)</dt><dd><tt>Print&nbsp;a&nbsp;warning&nbsp;message.<br>
&nbsp;<br>
Show&nbsp;to&nbsp;the&nbsp;user&nbsp;that&nbsp;something&nbsp;happened&nbsp;that&nbsp;does&nbsp;not&nbsp;affect&nbsp;the<br>
execution&nbsp;but&nbsp;is&nbsp;not&nbsp;usual.<br>
&nbsp;<br>
:param&nbsp;msg:&nbsp;The&nbsp;warning&nbsp;message.</tt></dd></dl>
</td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#55aa55">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Data</strong></big></font></td></tr>
    
<tr><td bgcolor="#55aa55"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><strong>PIPE</strong> = -1<br>
<strong>__author__</strong> = 'Galaad'<br>
<strong>__status__</strong> = 'alpha'<br>
<strong>__version__</strong> = '1.0.0'</td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#7799ee">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Author</strong></big></font></td></tr>
    
<tr><td bgcolor="#7799ee"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%">Galaad</td></tr></table>
</body></html>